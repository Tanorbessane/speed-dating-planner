# Story 1.1: Setup Initial du Projet

## Status

**Draft**

---

## Story

**As a** développeur,
**I want** un projet Python correctement structuré avec toutes les configurations de base,
**so that** je peux commencer à développer le système dans un environnement propre et reproductible.

---

## Acceptance Criteria

1. Le repository Git est initialisé avec structure de dossiers standard (`src/`, `tests/`, `docs/`, `examples/`)
2. Le fichier `pyproject.toml` (Poetry) ou `setup.py` est configuré avec métadonnées du projet (nom, version 0.1.0, auteur, description, Python >=3.10)
3. Le fichier `.gitignore` exclut les fichiers Python standards (`__pycache__`, `.pytest_cache`, `*.pyc`, `.venv`, etc.)
4. Les dépendances dev sont installées et fonctionnelles : `pytest`, `pytest-cov`, `black`, `ruff`, `mypy`
5. Un fichier `README.md` de base existe avec titre du projet et description d'une phrase
6. La commande `pytest` s'exécute sans erreur (même sans tests encore)
7. La commande `black .` et `ruff check .` s'exécutent sans erreur sur le code existant
8. Un fichier `.pre-commit-config.yaml` est configuré avec hooks pour black, ruff, mypy

---

## Tasks / Subtasks

- [ ] **Task 1: Initialiser la structure du repository** (AC: 1)
  - [ ] Créer dossier `src/` avec `__init__.py`
  - [ ] Créer dossier `tests/` avec `__init__.py`
  - [ ] Créer dossiers `docs/`, `examples/`, `benchmarks/`, `scripts/`
  - [ ] Vérifier que la structure correspond à celle définie dans architecture

- [ ] **Task 2: Configurer Poetry et pyproject.toml** (AC: 2, 4)
  - [ ] Créer `pyproject.toml` avec métadonnées du projet
    - Nom: `speed-dating-planner`
    - Version: `0.1.0`
    - Description: "Système d'optimisation de tables rotatives pour événements de networking/speed dating"
    - Python: `>=3.10`
  - [ ] Ajouter dépendances dev: `pytest`, `pytest-cov`, `black`, `ruff`, `mypy`
  - [ ] Exécuter `poetry install` pour créer l'environnement virtuel

- [ ] **Task 3: Créer fichier .gitignore** (AC: 3)
  - [ ] Ajouter patterns Python standards: `__pycache__/`, `*.py[cod]`, `*$py.class`
  - [ ] Ajouter patterns environnement: `.venv/`, `venv/`, `.env`
  - [ ] Ajouter patterns pytest: `.pytest_cache/`, `.coverage`, `htmlcov/`
  - [ ] Ajouter patterns IDE: `.vscode/`, `.idea/`, `*.swp`
  - [ ] Ajouter patterns build: `dist/`, `build/`, `*.egg-info/`

- [ ] **Task 4: Créer README.md de base** (AC: 5)
  - [ ] Ajouter titre: "# Système d'Optimisation de Tables Rotatives"
  - [ ] Ajouter description courte: "Générateur de plannings optimisés pour événements de networking/speed dating"
  - [ ] Placeholder pour installation, usage (à compléter dans Epic 3)

- [ ] **Task 5: Configurer pre-commit hooks** (AC: 8)
  - [ ] Créer `.pre-commit-config.yaml`
  - [ ] Configurer hook `black` (formatage automatique)
  - [ ] Configurer hook `ruff` (linting)
  - [ ] Configurer hook `mypy` (type checking)
  - [ ] Installer hooks: `pre-commit install`

- [ ] **Task 6: Créer fichiers de standards de développement** (DevLoadAlwaysFiles)
  - [ ] Créer `docs/architecture/coding-standards.md`
    - Docstrings Google style
    - Type hints complets
    - Black (line 88), ruff, mypy strict
    - Naming conventions PEP8
  - [ ] Créer `docs/architecture/tech-stack.md`
    - Python 3.10+
    - Poetry pour dependencies
    - pytest, black, ruff, mypy
    - Stdlib only pour MVP
  - [ ] Créer `docs/architecture/source-tree.md`
    - Copier arborescence depuis architecture/structure-des-modules-python.md
    - Expliquer responsabilités des dossiers clés

- [ ] **Task 7: Valider la configuration** (AC: 6, 7)
  - [ ] Exécuter `pytest` (doit réussir sans tests)
  - [ ] Exécuter `black .` (doit réussir)
  - [ ] Exécuter `ruff check .` (doit réussir)
  - [ ] Exécuter `mypy src/` (doit réussir même si src/ vide)

- [ ] **Task 8: Initialiser Git repository**
  - [ ] `git init` si pas déjà fait
  - [ ] Créer commit initial: "chore: initial project setup"

---

## Dev Notes

### Structure de Projet Attendue

[Source: docs/architecture/structure-des-modules-python.md#2.1]

```
speed-dating-planner/
├── src/
│   ├── __init__.py                    # Package principal
│   ├── models.py                      # (Story 1.2)
│   ├── validation.py                  # (Story 1.3)
│   ├── baseline.py                    # (Story 1.4)
│   ├── optimizer.py                   # (Epic 2)
│   ├── metrics.py                     # (Story 1.5)
│   ├── planner.py                     # (Epic 2)
│   ├── exporters.py                   # (Epic 3)
│   └── cli.py                         # (Epic 3)
├── tests/
│   ├── __init__.py
│   ├── test_models.py                 # (Story 1.2)
│   ├── test_validation.py             # (Story 1.3)
│   ├── test_baseline.py               # (Story 1.4)
│   └── ... (autres fichiers tests futurs)
├── examples/
│   ├── basic_usage.py                 # (Story 1.8)
│   └── ...
├── docs/
│   ├── architecture.md                # ✅ Existe
│   ├── prd.md                         # ✅ Existe
│   ├── architecture/                  # ✅ Existe (shardé)
│   └── user-guide.md                  # (Epic 3)
├── benchmarks/
│   └── results.json                   # (Epic 2)
├── scripts/
│   └── run_benchmarks.py              # (Epic 2)
├── pyproject.toml                     # ⚠️ À créer dans cette story
├── .pre-commit-config.yaml            # ⚠️ À créer dans cette story
├── .gitignore                         # ⚠️ À créer dans cette story
└── README.md                          # ⚠️ À créer dans cette story
```

### Configuration Poetry Requise

[Source: docs/architecture/structure-des-modules-python.md#2.2 + PRD Technical Assumptions]

**pyproject.toml doit contenir:**

```toml
[tool.poetry]
name = "speed-dating-planner"
version = "0.1.0"
description = "Système d'optimisation de tables rotatives pour événements de networking/speed dating"
authors = ["Your Name <you@example.com>"]
readme = "README.md"
packages = [{include = "src"}]

[tool.poetry.dependencies]
python = "^3.10"

[tool.poetry.group.dev.dependencies]
pytest = "^7.4.0"
pytest-cov = "^4.1.0"
black = "^23.7.0"
ruff = "^0.0.285"
mypy = "^1.5.0"

[tool.black]
line-length = 88
target-version = ['py310']

[tool.ruff]
line-length = 88
select = ["E", "F", "W", "I", "N"]
target-version = "py310"

[tool.mypy]
python_version = "3.10"
strict = true
warn_return_any = true
warn_unused_configs = true

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"
```

### Standards de Développement à Documenter

[Source: docs/architecture/checklist-results-report#Should-Fix-for-Better-Quality]

**Cette story DOIT créer les 3 fichiers manquants identifiés dans l'architecture checklist:**

1. **docs/architecture/coding-standards.md** - Standards de code
2. **docs/architecture/tech-stack.md** - Technologies et versions
3. **docs/architecture/source-tree.md** - Structure du projet et conventions

Ces fichiers sont listés dans `.bmad-core/core-config.yaml` → `devLoadAlwaysFiles` et seront chargés automatiquement par les dev agents à chaque story.

### Pre-commit Hooks Configuration

[Source: docs/architecture/structure-des-modules-python.md#2.1]

**.pre-commit-config.yaml requis:**

```yaml
repos:
  - repo: https://github.com/psf/black
    rev: 23.7.0
    hooks:
      - id: black
        language_version: python3.10

  - repo: https://github.com/charliermarsh/ruff-pre-commit
    rev: v0.0.285
    hooks:
      - id: ruff
        args: [--fix, --exit-non-zero-on-fix]

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.5.0
    hooks:
      - id: mypy
        additional_dependencies: []
```

### Pas de Tests Unitaires pour Cette Story

Cette story est purement de configuration et setup. Aucun code applicatif n'est écrit, donc pas de tests unitaires requis. La validation se fait via:
- Exécution réussie de `pytest` (sans tests)
- Exécution réussie de `black .`
- Exécution réussie de `ruff check .`
- Exécution réussie de `mypy src/`

---

## Testing

### Framework et Outils

[Source: docs/architecture/stratégie-de-testing.md#5.5]

- **Framework**: pytest
- **Couverture**: pytest-cov (minimum 85% pour modules applicatifs)
- **Linting**: ruff (configuration stricte)
- **Formatage**: black (line-length=88)
- **Type checking**: mypy (mode strict)

### Commandes de Validation pour Cette Story

```bash
# Installation des dépendances
poetry install

# Validation linting et formatage
black .
ruff check .

# Validation type checking
mypy src/

# Validation tests (doit passer même sans tests)
pytest -v

# Pre-commit hooks
pre-commit install
pre-commit run --all-files
```

### Pas de Tests Applicatifs

Cette story ne contient aucun code applicatif, seulement de la configuration. Les tests applicatifs commenceront à partir de Story 1.2 (Structures de Données).

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-10 | 1.0 | Story initiale créée par Scrum Master | Bob (SM) |

---

## Dev Agent Record

### Agent Model Used

_À compléter par le dev agent_

### Debug Log References

_À compléter par le dev agent_

### Completion Notes List

_À compléter par le dev agent_

### File List

_À compléter par le dev agent_

---

## QA Results

_À compléter par le QA agent_

---

**Definition of Done:**
- [ ] Tous les AC (1-8) sont satisfaits
- [ ] Toutes les tâches et sous-tâches sont complétées
- [ ] `pytest` exécuté avec succès
- [ ] `black .` exécuté avec succès
- [ ] `ruff check .` exécuté avec succès
- [ ] `mypy src/` exécuté avec succès
- [ ] Pre-commit hooks installés et fonctionnels
- [ ] Fichiers de standards créés (coding-standards.md, tech-stack.md, source-tree.md)
- [ ] Structure de projet conforme à l'architecture
- [ ] README.md créé avec description du projet
